{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport { Modal, Button, Header, Icon } from 'semantic-ui-react';\nimport FormHTMLEditor from './FormHTMLEditor';\nimport StarRatings from 'react-star-ratings';\nimport stripHtml from 'string-strip-html';\nimport * as api from '../util/mercuryService';\nimport { EventEmitter } from './util/EventEmitter';\nexport default class FeedbackModal extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      modalState: false,\n      rating: 0,\n      comment: '',\n      classId: -1\n    };\n    EventEmitter.subscribe('activateFeedbackModal', classId => {\n      this.setState({\n        classId,\n        modalState: true\n      });\n    });\n  }\n\n  changeRating(newRating, _name) {\n    this.setState({\n      rating: newRating\n    });\n  }\n\n  changeComment(comment) {\n    const newComment = stripHtml(comment);\n    this.setState({\n      comment: newComment\n    });\n  }\n\n  async submit() {\n    const {\n      classId,\n      rating,\n      comment\n    } = this.state;\n    await api.submitFeedback(classId, rating, comment);\n    this.setState({\n      modalState: false\n    });\n  }\n\n  render() {\n    const {\n      rating,\n      modalState,\n      comment\n    } = this.state;\n    return __jsx(\"div\", null, __jsx(Modal, {\n      style: {\n        borderless: 'true',\n        width: '40%',\n        height: '80%'\n      },\n      open: modalState,\n      onClose: () => this.setState({\n        modalState: false\n      }),\n      closeOnDimmerClick: false,\n      closeOnEscape: false\n    }, __jsx(Modal.Content, {\n      style: {\n        borderless: 'true'\n      }\n    }, __jsx(Modal.Header, null, __jsx(Icon, {\n      onClick: () => this.setState({\n        modalState: false\n      }),\n      style: {\n        float: 'right',\n        cursor: 'pointer'\n      },\n      name: \"times\"\n    })), __jsx(Header, null, \"Rate Your Call\"), __jsx(StarRatings, {\n      rating: rating,\n      starRatedColor: \"blue\",\n      changeRating: this.changeRating.bind(this),\n      numberOfStars: 5,\n      name: \"rating\"\n    }), __jsx(\"br\", null), __jsx(Header, null, \"Provide Your Comments\"), __jsx(FormHTMLEditor, {\n      onChange: this.changeComment.bind(this),\n      defaultValue: comment\n    }), __jsx(\"br\", null), __jsx(Button, {\n      onClick: this.submit.bind(this)\n    }, \"Submit\"))));\n  }\n\n}","map":null,"metadata":{},"sourceType":"module"}