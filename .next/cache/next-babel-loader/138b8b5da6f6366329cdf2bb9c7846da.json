{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { withRouter } from 'next/router';\nimport dynamic from 'next/dynamic';\nimport Layout from '../../components/layout';\nimport { Button, Accordion, List, Icon } from 'semantic-ui-react';\nimport { AuthRequired } from '../../components/authProvider';\nimport Queue from '../../components/queue/queue';\nimport * as api from '../../util/mercuryService';\nimport CreateGroupModal from '../../components/createGroupModal';\nimport StudentInviteModal from '../../components/invite/studentInviteModal';\nimport { EventEmitter } from '../../components/util/EventEmitter';\nimport FeedbackModal from '../../components/feedbackModal';\nimport StudentWebSocketClient from '../../util/studentWebSocket';\nimport TAWebSocketClient from '../../util/taWebSocket';\nimport ReceiveInviteModal from '../../components/invite/receiveInviteModal';\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\nimport GroupJoinRequestModal from '../../components/invite/groupJoinRequestModal';\nimport WaitingForRequestApprovalModal from '../../components/invite/WaitingForRequestApprovalModal';\nvar ScreenContainer = dynamic(_c = function _c() {\n  return import('../../components/screenContainer');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('../../components/screenContainer')];\n    },\n    modules: ['../../components/screenContainer']\n  }\n});\n_c2 = ScreenContainer;\nvar CreateDiscussionModal = dynamic(_c3 = function _c3() {\n  return import('../../components/createDiscussionModal');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('../../components/createDiscussionModal')];\n    },\n    modules: ['../../components/createDiscussionModal']\n  }\n});\n_c4 = CreateDiscussionModal;\n\nvar ClassPage = /*#__PURE__*/function (_Component) {\n  _inherits(ClassPage, _Component);\n\n  var _super = _createSuper(ClassPage);\n\n  function ClassPage(props) {\n    var _this;\n\n    _classCallCheck(this, ClassPage);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"leaveGroupNormal\", function () {\n      _this.setState({\n        vonageCred: null,\n        currentGroup: {\n          id: '',\n          name: ''\n        },\n        withTa: false\n      });\n\n      EventEmitter.publish('currentGroupChange', {\n        id: '',\n        name: ''\n      });\n      EventEmitter.publish('callOver', _this.classId);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"leaveGroup\", function () {\n      if (_this.state.currentGroup.UserId === _this.user.id && _this.state.currentGroup.type === 'group') {\n        _this.setState({\n          vonageCred: null,\n          currentGroup: {\n            id: '',\n            name: ''\n          },\n          withTa: false\n        });\n\n        EventEmitter.publish('currentGroupChange', {\n          id: '',\n          name: ''\n        });\n        EventEmitter.publish('callOver', _this.classId);\n      } else {\n        _this.setState({\n          vonageCred: null,\n          currentGroup: {\n            id: '',\n            name: ''\n          },\n          withTa: false\n        });\n\n        EventEmitter.publish('currentGroupChange', {\n          id: '',\n          name: ''\n        });\n        EventEmitter.publish('callOver', _this.classId);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fetchCurrentClass\", function () {\n      api.getClass(_this.classId).then(function (c) {\n        var userRole = c.users.find(function (u) {\n          return u.id === _this.user.id;\n        });\n        if (!userRole) _this.props.router.push('/calendar');\n\n        _this.setState({\n          currentClass: _objectSpread(_objectSpread({}, c), {}, {\n            role: userRole.role\n          })\n        });\n      })[\"catch\"](console.error);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleBack\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _this.props.router.push('/calendar');\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSelectGroup\", /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(group) {\n        var role, currGroup, UserId, id;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                role = _this.state.currentClass.role;\n\n                if (!(group.type === 'office' || role === 'Professor')) {\n                  _context2.next = 4;\n                  break;\n                }\n\n                // you are popped off the waiting queue\n                _this.joinGroup(group);\n\n                return _context2.abrupt(\"return\");\n\n              case 4:\n                _context2.next = 6;\n                return api.getGroupByID(_this.classId, group.id);\n\n              case 6:\n                currGroup = _context2.sent;\n                UserId = currGroup.UserId;\n                id = _this.user.id;\n\n                if (UserId === id) {\n                  // you are the leader of the group, no need for authentication\n                  _this.joinGroup(group);\n                } else {\n                  /**\n                   * Ping group leader to let you into the group\n                   */\n                  EventEmitter.publish('activateWaitingForRequestApprovalModal', group);\n                  EventEmitter.publish('requestJoinGroup', {\n                    userId: id,\n                    group: group\n                  });\n                }\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"handleCreateGroup\", /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(group) {\n        var groupData;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return api.postGroup(_this.classId, group.name, group.type, _this.user.id);\n\n              case 2:\n                groupData = _context3.sent;\n\n                _this.fetchCurrentClass();\n\n                EventEmitter.publish('newGroupCreated', _this.classId);\n                _context3.next = 7;\n                return _this.handleSelectGroup(groupData);\n\n              case 7:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function (_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n\n    _this.state = {\n      withTa: false,\n      clicked: 'none',\n      currentGroup: {\n        id: '',\n        name: ''\n      },\n      currentClass: {\n        id: '',\n        name: '',\n        groups: [],\n        users: [],\n        role: 'Student'\n      },\n      vonageCred: null,\n      isMounted: false\n    };\n\n    _this.defineEventEmitterCallbacks();\n\n    return _this;\n  }\n\n  _createClass(ClassPage, [{\n    key: \"joinGroup\",\n    value: function joinGroup(group) {\n      var _this2 = this;\n\n      if (this.state.currentGroup.UserId === this.user.id && this.state.currentGroup.type === 'group') {\n        EventEmitter.publish('leaderNeedsChange', group);\n        EventEmitter.publish('openGroupLeaderModal', true);\n        api.postGroupToken(this.classId, group.id).then(function (_ref4) {\n          var token = _ref4.token;\n\n          if (_this2.state.currentGroup.id != '') {\n            //the user is currently in a call, leave the call first\n            _this2.leaveGroupNormal();\n          }\n\n          _this2.setState({\n            vonageCred: {\n              sessionId: group.sessionId,\n              token: token\n            }\n          });\n\n          _this2.setState({\n            currentGroup: group\n          });\n\n          EventEmitter.publish('currentGroupChange', group);\n        })[\"catch\"](console.error);\n      } else {\n        api.postGroupToken(this.classId, group.id).then(function (_ref5) {\n          var token = _ref5.token;\n\n          if (_this2.state.currentGroup.id != '') {\n            //the user is currently in a call, leave the call first\n            _this2.leaveGroupNormal();\n          }\n\n          _this2.setState({\n            vonageCred: {\n              sessionId: group.sessionId,\n              token: token\n            }\n          });\n\n          _this2.setState({\n            currentGroup: group\n          });\n\n          EventEmitter.publish('currentGroupChange', group);\n        })[\"catch\"](console.error);\n      }\n    }\n  }, {\n    key: \"defineEventEmitterCallbacks\",\n    value: function defineEventEmitterCallbacks() {\n      var _this3 = this;\n\n      EventEmitter.subscribe('clearLeftSide', function () {\n        _this3.setState({\n          withTa: true\n        });\n      });\n      EventEmitter.subscribe('joinPrivateGroupOnApproval', function (group) {\n        EventEmitter.publish('removeWaitingForRequestApprovalModal');\n\n        _this3.joinGroup(group);\n      });\n      EventEmitter.subscribe('notifyJoinRequestDeclined', function (group) {\n        NotificationManager.info(\"Your Request To Join \".concat(group.name, \" Was Declined\"));\n        EventEmitter.publish('removeWaitingForRequestApprovalModal');\n      });\n      EventEmitter.subscribe('fetchGroups', function () {\n        _this3.fetchCurrentClass();\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this4 = this;\n\n      var classId = this.props.router.query.classId;\n      if (!classId) return;\n      this.classId = Number(classId);\n      api.getMe().then(function (meData) {\n        _this4.user = meData;\n      }).then(function () {\n        return api.getClass(_this4.classId);\n      }).then(function (c) {\n        var userRole = c.users.find(function (u) {\n          return u.id === _this4.user.id;\n        });\n        if (!userRole) _this4.props.router.push('/calendar');\n        var role = userRole.role;\n        /**\n         * Start the appropriate web socket handler depending on the user role\n         */\n\n        if (role === 'Student') {\n          /**\n           * Start student web socket handler\n           */\n          new StudentWebSocketClient().start({\n            me: _this4.user,\n            courseId: _this4.classId\n          });\n        } else {\n          /**\n           * Start TA web socket handler\n           */\n          new TAWebSocketClient().start({\n            me: _this4.user,\n            courseId: _this4.classId,\n            onJoin: _this4.handleSelectGroup\n          });\n        }\n\n        _this4.setState({\n          currentClass: _objectSpread(_objectSpread({}, c), {}, {\n            role: userRole.role\n          }),\n          isMounted: true\n        });\n\n        EventEmitter.publish('allOtherStudentsInClass', _this4.state.currentClass.users.filter(function (user) {\n          return user.id !== _this4.user.id && user.role === 'Student';\n        }));\n        EventEmitter.publish('me', _this4.user);\n      })[\"catch\"](console.error);\n    }\n  }, {\n    key: \"getButtonToDisplay\",\n    value: function getButtonToDisplay() {\n      var _this5 = this;\n\n      return this.state.currentClass.role === 'Student' ? __jsx(CreateGroupModal, {\n        onCreate: this.handleCreateGroup\n      }) : this.state.clicked === 'none' ? __jsx(Button, {\n        color: \"teal\",\n        content: \"Modify Discussions\",\n        fluid: true,\n        style: {\n          fontSize: '1vw'\n        },\n        onClick: function onClick() {\n          _this5.setState({\n            clicked: 'inline'\n          });\n        }\n      }) : __jsx(React.Fragment, null, __jsx(CreateDiscussionModal, {\n        id: \"createDiscussionModal\",\n        onCreate: this.handleCreateGroup\n      }), __jsx(Button, {\n        color: \"red\",\n        content: \"Done\",\n        fluid: true,\n        style: {\n          fontSize: '1vw',\n          marginTop: '2%'\n        },\n        onClick: function onClick() {\n          _this5.setState({\n            clicked: 'none'\n          });\n        }\n      }));\n    }\n  }, {\n    key: \"getDeleteButton\",\n    value: function getDeleteButton(group) {\n      var _this6 = this;\n\n      return __jsx(Button, {\n        id: \"deletebutton\".concat(group.id),\n        compact: true,\n        icon: true,\n        size: \"mini\",\n        floated: \"right\",\n        style: {\n          display: \"\".concat(this.state.clicked),\n          fontSize: '.6vw',\n          textAlign: 'center',\n          width: '10%',\n          marginBottom: '2%',\n          minWidth: '10px',\n          backgroundColor: 'transparent'\n        },\n        onClick: function onClick() {\n          return api.deleteGroup(_this6.classId, group.id).then(function () {\n            return _this6.fetchCurrentClass();\n          });\n        }\n      }, __jsx(Icon, {\n        name: \"delete\",\n        color: \"red\"\n      }));\n    }\n  }, {\n    key: \"showInviteButton\",\n    value: function showInviteButton(group) {\n      var plusIcon = __jsx(List.Icon, {\n        name: \"user plus\",\n        onClick: function onClick() {\n          EventEmitter.publish('openInviteModal', true);\n        }\n      });\n\n      var noPlusIcon = __jsx(\"div\", null);\n\n      return this.state.currentGroup.id == group.id && this.state.vonageCred !== null ? plusIcon : noPlusIcon;\n    }\n  }, {\n    key: \"getListItemStyle\",\n    value: function getListItemStyle(group) {\n      var unClickedGroupsStyle = {\n        fontSize: '.8vw',\n        textAlign: 'left',\n        width: '80%',\n        marginBottom: '2%',\n        minWidth: '41px',\n        display: 'inline-block'\n      };\n      var clickedGroupsStyle = {\n        fontSize: '.8vw',\n        textAlign: 'left',\n        width: '80%',\n        marginBottom: '2%',\n        minWidth: '41px',\n        background: '#e0e1e2',\n        borderRadius: 10,\n        borderWidth: 1,\n        borderColor: '#fff',\n        display: 'inline-block'\n      };\n      return this.state.currentGroup.id == group.id && this.state.vonageCred !== null ? clickedGroupsStyle : unClickedGroupsStyle;\n    }\n  }, {\n    key: \"showOffice\",\n    value: function showOffice() {\n      var _this7 = this;\n\n      return (this.state.currentClass.role !== 'Student' || this.state.currentGroup.type === 'office') && __jsx(\"div\", {\n        style: {\n          paddingLeft: 20\n        }\n      }, __jsx(List, {\n        relaxed: true,\n        selection: true,\n        verticalAlign: \"middle\"\n      }, this.state.currentClass.groups.filter(function (group) {\n        return group.type === 'office';\n      }).map(function (group) {\n        return __jsx(List.Item, {\n          key: \"office\",\n          onClick: function onClick() {\n            if (_this7.state.currentGroup.id !== group.id) {\n              _this7.handleSelectGroup(group);\n            }\n          },\n          style: _this7.getListItemStyle(group)\n        }, __jsx(List.Icon, {\n          name: \"graduation cap\"\n        }), __jsx(List.Content, null, __jsx(List.Header, {\n          as: \"a\"\n        }, \"TA Office\")), _this7.showInviteButton(group));\n      })));\n    }\n  }, {\n    key: \"leftDisplay\",\n    value: function leftDisplay() {\n      var _this8 = this;\n\n      return this.state.withTa === false ? __jsx(\"div\", {\n        style: {\n          height: '100%',\n          marginLeft: '2.5%'\n        }\n      }, __jsx(Button.Group, {\n        size: \"huge\",\n        style: {\n          marginBottom: 12,\n          width: '100%'\n        },\n        fluid: true\n      }, __jsx(Button, {\n        compact: true,\n        icon: \"angle left\",\n        content: this.state.currentClass.name,\n        style: {\n          fontSize: '1.5vw',\n          textAlign: 'left',\n          width: '75%',\n          marginBottom: '2%',\n          minWidth: '41px'\n        },\n        onClick: this.handleBack\n      })), this.showOffice(), __jsx(Accordion, {\n        fluid: true,\n        exclusive: false,\n        defaultActiveIndex: [0, 1],\n        style: {\n          fontSize: '1vw',\n          textAlign: 'left',\n          width: '100%',\n          marginBottom: '2%',\n          minWidth: '41px'\n        },\n        panels: [{\n          key: 'discussions',\n          title: 'Discussions',\n          content: {\n            content: __jsx(\"div\", {\n              style: {\n                paddingLeft: 20,\n                height: 200,\n                overflow: 'auto'\n              }\n            }, __jsx(List, {\n              relaxed: true,\n              selection: true\n            }, this.state.currentClass.groups.filter(function (group) {\n              return group.type === 'discussion';\n            }).map(function (group) {\n              return __jsx(React.Fragment, null, __jsx(List.Item, {\n                key: \"discussion_\".concat(group.id),\n                onClick: function onClick() {\n                  if (_this8.state.currentGroup.id !== group.id) {\n                    _this8.handleSelectGroup(group);\n                  }\n                },\n                style: _this8.getListItemStyle(group)\n              }, __jsx(List.Icon, {\n                name: \"sound\"\n              }), __jsx(List.Content, null, __jsx(List.Header, {\n                as: \"a\"\n              }, group.name)), _this8.showInviteButton(group)), _this8.getDeleteButton(group));\n            })))\n          }\n        }, {\n          key: 'private-groups',\n          title: 'Private Groups',\n          content: {\n            content: __jsx(\"div\", {\n              style: {\n                paddingLeft: 20,\n                height: 200,\n                overflow: 'auto'\n              }\n            }, __jsx(List, {\n              relaxed: true,\n              selection: true\n            }, this.state.currentClass.groups.filter(function (group) {\n              return group.type === 'group';\n            }).map(function (group) {\n              return __jsx(List.Item, {\n                key: \"private_group_\".concat(group.id),\n                onClick: function onClick() {\n                  if (_this8.state.currentGroup.id !== group.id) {\n                    _this8.handleSelectGroup(group);\n                  }\n                },\n                style: _this8.getListItemStyle(group)\n              }, __jsx(List.Icon, {\n                name: \"lock\"\n              }), __jsx(List.Content, null, __jsx(List.Header, {\n                as: \"a\"\n              }, group.name)), _this8.showInviteButton(group));\n            })))\n          }\n        }]\n      }), __jsx(\"div\", {\n        style: {\n          position: 'absolute',\n          width: 'calc(100% - 38px)',\n          bottom: 14\n        }\n      }, this.getButtonToDisplay())) : __jsx(\"div\", null, \" \");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!this.state.isMounted) {\n        return null;\n      }\n\n      return __jsx(Layout, {\n        left: this.leftDisplay(),\n        right: __jsx(Queue, {\n          onJoin: this.handleSelectGroup\n        })\n      }, this.state.vonageCred && __jsx(ScreenContainer, {\n        style: {\n          width: '100%',\n          maxHeight: '75vh'\n        },\n        sessionId: this.state.vonageCred.sessionId,\n        token: this.state.vonageCred.token,\n        onLeave: this.leaveGroup\n      }), __jsx(StudentInviteModal, null), __jsx(FeedbackModal, null), __jsx(ReceiveInviteModal, {\n        onJoin: this.handleSelectGroup\n      }), __jsx(GroupJoinRequestModal, null), __jsx(WaitingForRequestApprovalModal, null), __jsx(NotificationContainer, null));\n    }\n  }]);\n\n  return ClassPage;\n}(Component);\n\nexport default _c6 = AuthRequired(_c5 = withRouter(ClassPage));\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"ScreenContainer$dynamic\");\n$RefreshReg$(_c2, \"ScreenContainer\");\n$RefreshReg$(_c3, \"CreateDiscussionModal$dynamic\");\n$RefreshReg$(_c4, \"CreateDiscussionModal\");\n$RefreshReg$(_c5, \"%default%$AuthRequired\");\n$RefreshReg$(_c6, \"%default%\");","map":{"version":3,"sources":["C:/Users/ryanj/Documents/mercury/pages/classes/[classId].js"],"names":["React","Component","withRouter","dynamic","Layout","Button","Accordion","List","Icon","AuthRequired","Queue","api","CreateGroupModal","StudentInviteModal","EventEmitter","FeedbackModal","StudentWebSocketClient","TAWebSocketClient","ReceiveInviteModal","NotificationContainer","NotificationManager","GroupJoinRequestModal","WaitingForRequestApprovalModal","ScreenContainer","ssr","CreateDiscussionModal","ClassPage","props","setState","vonageCred","currentGroup","id","name","withTa","publish","classId","state","UserId","user","type","getClass","then","c","userRole","users","find","u","router","push","currentClass","role","console","error","group","joinGroup","getGroupByID","currGroup","userId","postGroup","groupData","fetchCurrentClass","handleSelectGroup","clicked","groups","isMounted","defineEventEmitterCallbacks","postGroupToken","token","leaveGroupNormal","sessionId","subscribe","info","query","Number","getMe","meData","start","me","courseId","onJoin","filter","handleCreateGroup","fontSize","marginTop","display","textAlign","width","marginBottom","minWidth","backgroundColor","deleteGroup","plusIcon","noPlusIcon","unClickedGroupsStyle","clickedGroupsStyle","background","borderRadius","borderWidth","borderColor","paddingLeft","map","getListItemStyle","showInviteButton","height","marginLeft","handleBack","showOffice","key","title","content","overflow","getDeleteButton","position","bottom","getButtonToDisplay","leftDisplay","maxHeight","leaveGroup"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { withRouter } from 'next/router'\nimport dynamic from 'next/dynamic'\nimport Layout from '../../components/layout'\nimport { Button, Accordion, List, Icon } from 'semantic-ui-react'\nimport { AuthRequired } from '../../components/authProvider'\nimport Queue from '../../components/queue/queue'\nimport * as api from '../../util/mercuryService'\nimport CreateGroupModal from '../../components/createGroupModal'\nimport StudentInviteModal from '../../components/invite/studentInviteModal'\nimport { EventEmitter } from '../../components/util/EventEmitter'\nimport FeedbackModal from '../../components/feedbackModal'\nimport StudentWebSocketClient from '../../util/studentWebSocket'\nimport TAWebSocketClient from '../../util/taWebSocket'\nimport ReceiveInviteModal from '../../components/invite/receiveInviteModal'\nimport { NotificationContainer, NotificationManager } from 'react-notifications'\nimport GroupJoinRequestModal from '../../components/invite/groupJoinRequestModal'\nimport WaitingForRequestApprovalModal from '../../components/invite/WaitingForRequestApprovalModal'\n\nconst ScreenContainer = dynamic(\n  () => import('../../components/screenContainer'),\n  {\n    ssr: false,\n  }\n)\n\nconst CreateDiscussionModal = dynamic(\n  () => import('../../components/createDiscussionModal'),\n  {\n    ssr: false,\n  }\n)\n\nclass ClassPage extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      withTa: false,\n      clicked: 'none',\n      currentGroup: { id: '', name: '' },\n      currentClass: {\n        id: '',\n        name: '',\n        groups: [],\n        users: [],\n        role: 'Student',\n      },\n      vonageCred: null,\n      isMounted: false,\n    }\n    this.defineEventEmitterCallbacks()\n  }\n\n  joinGroup(group) {\n    if (this.state.currentGroup.UserId === this.user.id && this.state.currentGroup.type === 'group') {\n      EventEmitter.publish('leaderNeedsChange', group)\n      EventEmitter.publish('openGroupLeaderModal', true)\n      api\n        .postGroupToken(this.classId, group.id)\n        .then(({ token }) => {\n          if (this.state.currentGroup.id != '') {\n            //the user is currently in a call, leave the call first\n            this.leaveGroupNormal()\n          }\n          this.setState({ vonageCred: { sessionId: group.sessionId, token } })\n          this.setState({ currentGroup: group })\n          EventEmitter.publish('currentGroupChange', group)\n        })\n        .catch(console.error)\n    }\n    else {\n    api\n      .postGroupToken(this.classId, group.id)\n      .then(({ token }) => {\n        if (this.state.currentGroup.id != '') {\n          //the user is currently in a call, leave the call first\n          this.leaveGroupNormal()\n        }\n        this.setState({ vonageCred: { sessionId: group.sessionId, token } })\n        this.setState({ currentGroup: group })\n        EventEmitter.publish('currentGroupChange', group)\n      })\n      .catch(console.error)\n    }\n  }\n\n  leaveGroupNormal = () => {\n    this.setState({\n      vonageCred: null,\n      currentGroup: { id: '', name: '' },\n      withTa: false,\n    })\n    EventEmitter.publish('currentGroupChange', { id: '', name: '' })\n    EventEmitter.publish('callOver', this.classId)\n  }\n\n  leaveGroup = () => {\n    if (this.state.currentGroup.UserId === this.user.id && this.state.currentGroup.type === 'group') {\n      this.setState({\n        vonageCred: null,\n        currentGroup: { id: '', name: '' },\n        withTa: false,\n      })\n      EventEmitter.publish('currentGroupChange', { id: '', name: '' })\n      EventEmitter.publish('callOver', this.classId)\n    }\n    else {\n      this.setState({\n        vonageCred: null,\n        currentGroup: { id: '', name: '' },\n        withTa: false,\n      })\n      EventEmitter.publish('currentGroupChange', { id: '', name: '' })\n      EventEmitter.publish('callOver', this.classId)\n    }\n  }\n\n  defineEventEmitterCallbacks() {\n    EventEmitter.subscribe('clearLeftSide', () => {\n      this.setState({ withTa: true })\n    })\n\n    EventEmitter.subscribe('joinPrivateGroupOnApproval', (group) => {\n      EventEmitter.publish('removeWaitingForRequestApprovalModal')\n      this.joinGroup(group)\n    })\n\n    EventEmitter.subscribe('notifyJoinRequestDeclined', (group) => {\n      NotificationManager.info(\n        `Your Request To Join ${group.name} Was Declined`\n      )\n      EventEmitter.publish('removeWaitingForRequestApprovalModal')\n    })\n\n    EventEmitter.subscribe('fetchGroups', () => {\n      this.fetchCurrentClass()\n    })\n  }\n\n  componentDidMount() {\n    const { classId } = this.props.router.query\n    if (!classId) return\n    this.classId = Number(classId)\n\n    api\n      .getMe()\n      .then((meData) => {\n        this.user = meData\n      })\n\n      .then(() => api.getClass(this.classId))\n      .then((c) => {\n        const userRole = c.users.find((u) => u.id === this.user.id)\n        if (!userRole) this.props.router.push('/calendar')\n        const { role } = userRole\n\n        /**\n         * Start the appropriate web socket handler depending on the user role\n         */\n\n        if (role === 'Student') {\n          /**\n           * Start student web socket handler\n           */\n\n          new StudentWebSocketClient().start({\n            me: this.user,\n            courseId: this.classId,\n          })\n        } else {\n          /**\n           * Start TA web socket handler\n           */\n\n          new TAWebSocketClient().start({\n            me: this.user,\n            courseId: this.classId,\n            onJoin: this.handleSelectGroup,\n          })\n        }\n\n        this.setState({\n          currentClass: {\n            ...c,\n            role: userRole.role,\n          },\n          isMounted: true,\n        })\n\n        EventEmitter.publish(\n          'allOtherStudentsInClass',\n          this.state.currentClass.users.filter(\n            (user) => user.id !== this.user.id && user.role === 'Student'\n          )\n        )\n\n        EventEmitter.publish('me', this.user)\n      })\n      .catch(console.error)\n  }\n\n  fetchCurrentClass = () => {\n    api\n      .getClass(this.classId)\n      .then((c) => {\n        const userRole = c.users.find((u) => u.id === this.user.id)\n        if (!userRole) this.props.router.push('/calendar')\n        this.setState({\n          currentClass: {\n            ...c,\n            role: userRole.role,\n          },\n        })\n      })\n      .catch(console.error)\n  }\n\n  handleBack = async () => {\n    await this.props.router.push('/calendar')\n  }\n\n  handleSelectGroup = async (group) => {\n    const { role } = this.state.currentClass\n\n    if (group.type === 'office' || role === 'Professor') {\n      // you are popped off the waiting queue\n      this.joinGroup(group)\n      return\n    }\n\n    /**\n     * First, check if you are the leader of the group\n     */\n\n    const currGroup = await api.getGroupByID(this.classId, group.id)\n    const { UserId } = currGroup\n    const { id } = this.user\n\n    if (UserId === id) {\n      // you are the leader of the group, no need for authentication\n      this.joinGroup(group)\n    } else {\n      /**\n       * Ping group leader to let you into the group\n       */\n      EventEmitter.publish('activateWaitingForRequestApprovalModal', group)\n      EventEmitter.publish('requestJoinGroup', {\n        userId: id,\n        group: group,\n      })\n    }\n  }\n\n  getButtonToDisplay() {\n    return this.state.currentClass.role === 'Student' ? (\n      <CreateGroupModal onCreate={this.handleCreateGroup} />\n    ) : this.state.clicked === 'none' ? (\n      <Button\n        color=\"teal\"\n        content=\"Modify Discussions\"\n        fluid\n        style={{ fontSize: '1vw' }}\n        onClick={() => {\n          this.setState({ clicked: 'inline' })\n        }}\n      />\n    ) : (\n      <>\n        <CreateDiscussionModal\n          id=\"createDiscussionModal\"\n          onCreate={this.handleCreateGroup}\n        />\n        <Button\n          color=\"red\"\n          content=\"Done\"\n          fluid\n          style={{ fontSize: '1vw', marginTop: '2%' }}\n          onClick={() => {\n            this.setState({ clicked: 'none' })\n          }}\n        />\n      </>\n    )\n  }\n\n  getDeleteButton(group) {\n    return (\n      <Button\n        id={`deletebutton${group.id}`}\n        compact\n        icon\n        size=\"mini\"\n        floated=\"right\"\n        style={{\n          display: `${this.state.clicked}`,\n          fontSize: '.6vw',\n          textAlign: 'center',\n          width: '10%',\n          marginBottom: '2%',\n          minWidth: '10px',\n          backgroundColor: 'transparent',\n        }}\n        onClick={() =>\n          api\n            .deleteGroup(this.classId, group.id)\n            .then(() => this.fetchCurrentClass())\n        }\n      >\n        <Icon name=\"delete\" color=\"red\" />\n      </Button>\n    )\n  }\n\n  handleCreateGroup = async (group) => {\n    const groupData = await api.postGroup(\n      this.classId,\n      group.name,\n      group.type,\n      this.user.id\n    )\n    this.fetchCurrentClass()\n    EventEmitter.publish('newGroupCreated', this.classId)\n    await this.handleSelectGroup(groupData)\n  }\n\n  showInviteButton(group) {\n    const plusIcon = (\n      <List.Icon\n        name=\"user plus\"\n        onClick={() => {\n          EventEmitter.publish('openInviteModal', true)\n        }}\n      />\n    )\n    const noPlusIcon = <div></div>\n\n    return this.state.currentGroup.id == group.id &&\n      this.state.vonageCred !== null\n      ? plusIcon\n      : noPlusIcon\n  }\n\n  getListItemStyle(group) {\n    const unClickedGroupsStyle = {\n      fontSize: '.8vw',\n      textAlign: 'left',\n      width: '80%',\n      marginBottom: '2%',\n      minWidth: '41px',\n      display: 'inline-block',\n    }\n\n    const clickedGroupsStyle = {\n      fontSize: '.8vw',\n      textAlign: 'left',\n      width: '80%',\n      marginBottom: '2%',\n      minWidth: '41px',\n      background: '#e0e1e2',\n      borderRadius: 10,\n      borderWidth: 1,\n      borderColor: '#fff',\n      display: 'inline-block',\n    }\n\n    return this.state.currentGroup.id == group.id &&\n      this.state.vonageCred !== null\n      ? clickedGroupsStyle\n      : unClickedGroupsStyle\n  }\n\n  showOffice() {\n    return (\n      (this.state.currentClass.role !== 'Student' ||\n        this.state.currentGroup.type === 'office') && (\n        <div style={{ paddingLeft: 20 }}>\n          <List relaxed selection verticalAlign=\"middle\">\n            {this.state.currentClass.groups\n              .filter((group) => group.type === 'office')\n              .map((group) => (\n                <List.Item\n                  key={`office`}\n                  onClick={() => {\n                    if (this.state.currentGroup.id !== group.id) {\n                      this.handleSelectGroup(group)\n                    }\n                  }}\n                  style={this.getListItemStyle(group)}\n                >\n                  <List.Icon name=\"graduation cap\" />\n                  <List.Content>\n                    <List.Header as=\"a\">TA Office</List.Header>\n                  </List.Content>\n                  {this.showInviteButton(group)}\n                </List.Item>\n              ))}\n          </List>\n        </div>\n      )\n    )\n  }\n\n  leftDisplay() {\n    return this.state.withTa === false ? (\n      <div style={{ height: '100%', marginLeft: '2.5%' }}>\n        <Button.Group\n          size=\"huge\"\n          style={{ marginBottom: 12, width: '100%' }}\n          fluid\n        >\n          <Button\n            compact\n            icon=\"angle left\"\n            content={this.state.currentClass.name}\n            style={{\n              fontSize: '1.5vw',\n              textAlign: 'left',\n              width: '75%',\n              marginBottom: '2%',\n              minWidth: '41px',\n            }}\n            onClick={this.handleBack}\n          />\n          {/* <Button\n            compact\n            icon=\"setting\"\n            style={{\n              fontSize: '1.5vw',\n              textAlign: 'center',\n              width: '15%',\n              marginBottom: '2%',\n              minWidth: '14px',\n            }}\n          /> */}\n        </Button.Group>\n        {this.showOffice()}\n        <Accordion\n          fluid\n          exclusive={false}\n          defaultActiveIndex={[0, 1]}\n          style={{\n            fontSize: '1vw',\n            textAlign: 'left',\n            width: '100%',\n            marginBottom: '2%',\n            minWidth: '41px',\n          }}\n          panels={[\n            {\n              key: 'discussions',\n              title: 'Discussions',\n              content: {\n                content: (\n                  <div\n                    style={{ paddingLeft: 20, height: 200, overflow: 'auto' }}\n                  >\n                    <List relaxed selection>\n                      {this.state.currentClass.groups\n                        .filter((group) => group.type === 'discussion')\n                        .map((group) => (\n                          <>\n                            <List.Item\n                              key={`discussion_${group.id}`}\n                              onClick={() => {\n                                if (this.state.currentGroup.id !== group.id) {\n                                  this.handleSelectGroup(group)\n                                }\n                              }}\n                              style={this.getListItemStyle(group)}\n                            >\n                              <List.Icon name=\"sound\" />\n                              <List.Content>\n                                <List.Header as=\"a\">{group.name}</List.Header>\n                              </List.Content>\n                              {this.showInviteButton(group)}\n                            </List.Item>\n                            {this.getDeleteButton(group)}\n                          </>\n                        ))}\n                    </List>\n                  </div>\n                ),\n              },\n            },\n            {\n              key: 'private-groups',\n              title: 'Private Groups',\n              content: {\n                content: (\n                  <div\n                    style={{ paddingLeft: 20, height: 200, overflow: 'auto' }}\n                  >\n                    <List relaxed selection>\n                      {this.state.currentClass.groups\n                        .filter((group) => group.type === 'group')\n                        .map((group) => (\n                          <List.Item\n                            key={`private_group_${group.id}`}\n                            onClick={() => {\n                              if (this.state.currentGroup.id !== group.id) {\n                                this.handleSelectGroup(group)\n                              }\n                            }}\n                            style={this.getListItemStyle(group)}\n                          >\n                            <List.Icon name=\"lock\" />\n                            <List.Content>\n                              <List.Header as=\"a\">{group.name}</List.Header>\n                            </List.Content>\n                            {this.showInviteButton(group)}\n                          </List.Item>\n                        ))}\n                    </List>\n                  </div>\n                ),\n              },\n            },\n          ]}\n        />\n        <div\n          style={{\n            position: 'absolute',\n            width: 'calc(100% - 38px)',\n            bottom: 14,\n          }}\n        >\n          {this.getButtonToDisplay()}\n        </div>\n      </div>\n    ) : (\n      <div> </div>\n    )\n  }\n\n  render() {\n    if (!this.state.isMounted) {\n      return null\n    }\n\n    return (\n      <Layout\n        left={this.leftDisplay()}\n        right={<Queue onJoin={this.handleSelectGroup} />}\n      >\n        {this.state.vonageCred && (\n          <ScreenContainer\n            style={{ width: '100%', maxHeight: '75vh' }}\n            sessionId={this.state.vonageCred.sessionId}\n            token={this.state.vonageCred.token}\n            onLeave={this.leaveGroup}\n          />\n        )}\n        <StudentInviteModal />\n        <FeedbackModal />\n        <ReceiveInviteModal onJoin={this.handleSelectGroup} />\n        <GroupJoinRequestModal />\n        <WaitingForRequestApprovalModal />\n        <NotificationContainer />\n      </Layout>\n    )\n  }\n}\nexport default AuthRequired(withRouter(ClassPage))\n"]},"metadata":{},"sourceType":"module"}