{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport * as api from '../../util/mercuryService';\nimport StudentQueueView from './student/studentQueueView';\nimport TAQueueView from './ta/taQueueView';\n\nclass Queue extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isDataLoaded: false,\n      me: {},\n      classData: [],\n      office: {}\n    };\n  }\n\n  componentDidMount() {\n    this.courseId = Number(window.location.href.split('/')[4]);\n    let me = {};\n    let classData = {};\n    let office = {};\n    api.getMe().then(meData => {\n      me = meData;\n    }).then(() => api.getClasses()).then(classPayload => {\n      classData = classPayload;\n    }).then(() => api.getClass(this.courseId)).then(cclass => {\n      office = cclass.groups.find(group => group.type === 'office');\n    }).then(() => this.setState({\n      me,\n      classData,\n      office,\n      isDataLoaded: true\n    }));\n  }\n\n  getRoleForClass() {\n    const {\n      classData\n    } = this.state;\n    let userRole = null;\n    classData.forEach(row => {\n      let {\n        id,\n        role\n      } = row;\n\n      if (this.courseId === Number(id)) {\n        userRole = role;\n      }\n    });\n    return userRole;\n  }\n\n  render() {\n    const {\n      isDataLoaded,\n      me,\n      office\n    } = this.state;\n\n    if (!isDataLoaded) {\n      return null;\n    }\n\n    if (this.getRoleForClass() === 'Student') {\n      return __jsx(StudentQueueView, {\n        me: me,\n        onJoin: this.props.onJoin,\n        office: office\n      });\n    }\n\n    return __jsx(TAQueueView, {\n      me: me,\n      onJoin: this.props.onJoin\n    });\n  }\n\n}\n\nexport default Queue;","map":null,"metadata":{},"sourceType":"module"}