{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { withRouter } from 'next/router';\nimport dynamic from 'next/dynamic';\nimport Layout from '../../components/layout';\nimport { Button, Accordion, List, Icon } from 'semantic-ui-react';\nimport { AuthRequired, useAuth } from '../../components/authProvider';\nimport Queue from '../../components/queue/queue';\nimport * as api from '../../util/mercuryService';\nimport CreateGroupModal from '../../components/createGroupModal';\nimport StudentInviteModal from '../../components/studentInviteModal';\nimport { EventEmitter } from '../../components/util/EventEmitter'; // import { render } from 'nprogress'\n\nvar CreateDiscussionModal = dynamic(_c = function _c() {\n  return import('../../components/createDiscussionModal');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('../../components/createDiscussionModal')];\n    },\n    modules: ['../../components/createDiscussionModal']\n  }\n});\n_c2 = CreateDiscussionModal;\nvar Vonage = dynamic(_c3 = function _c3() {\n  return import('../../components/vonage');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('../../components/vonage')];\n    },\n    modules: ['../../components/vonage']\n  }\n});\n_c4 = Vonage;\nvar unClickedGroupsStyle = {\n  fontSize: '.8vw',\n  textAlign: 'left',\n  width: '80%',\n  marginBottom: '2%',\n  minWidth: '41px',\n  display: 'inline-block'\n};\nvar clickedGroupsStyle = {\n  fontSize: '.8vw',\n  textAlign: 'left',\n  width: '80%',\n  marginBottom: '2%',\n  minWidth: '41px',\n  background: '#e0e1e2',\n  borderRadius: 10,\n  borderWidth: 1,\n  borderColor: '#fff',\n  display: 'inline-block'\n};\n\nvar ClassPage = /*#__PURE__*/function (_Component) {\n  _inherits(ClassPage, _Component);\n\n  var _super = _createSuper(ClassPage);\n\n  function ClassPage(props) {\n    var _this;\n\n    _classCallCheck(this, ClassPage);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"fetchCurrentClass\", function () {\n      api.getClass(_this.classId).then(function (c) {\n        var userRole = c.users.find(function (u) {\n          return u.id === _this.user.id;\n        });\n        if (!userRole) _this.props.router.push('/calendar');\n\n        _this.setState({\n          currentClass: _objectSpread(_objectSpread({}, c), {}, {\n            role: userRole.role\n          })\n        });\n      })[\"catch\"](console.error);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleBack\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _this.props.router.push('/calendar');\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSelectGroup\", function (group) {\n      api.postGroupToken(_this.classId, group.id).then(function (_ref2) {\n        var token = _ref2.token;\n\n        _this.setState({\n          vonageCred: null\n        });\n\n        _this.setState({\n          vonageCred: {\n            sessionId: group.sessionId,\n            token: token\n          }\n        });\n      })[\"catch\"](console.error);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleJoinTA\", function (group) {\n      _this.handleSelectGroup(group);\n\n      _this.setState({\n        currentGroup: group\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleCreateGroup\", /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(group) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return api.postGroup(_this.classId, group.name, group.type).then(function (group) {\n                  _this.fetchCurrentClass();\n\n                  _this.handleSelectGroup(group);\n\n                  _this.setState({\n                    currentGroup: group\n                  });\n                });\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"handleInvite\", function () {\n      _this.setState({\n        openInviteModal: false\n      });\n    });\n\n    _this.state = {\n      clicked: 'none',\n      currentGroup: {\n        id: '',\n        name: ''\n      },\n      currentClass: {\n        id: '',\n        name: '',\n        groups: [],\n        users: [],\n        role: 'Student'\n      },\n      vonageCred: null,\n      openInviteModal: false\n    };\n    return _this;\n  }\n\n  _createClass(ClassPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var classId = this.props.router.query.classId;\n      this.classId = classId;\n      if (!this.classId) return;\n      api.getMe().then(function (meData) {\n        _this2.user = meData;\n      }).then(function () {\n        return api.getClass(_this2.classId);\n      }).then(function (c) {\n        var userRole = c.users.find(function (u) {\n          return u.id === _this2.user.id;\n        });\n        if (!userRole) _this2.props.router.push('/calendar');\n\n        _this2.setState({\n          currentClass: _objectSpread(_objectSpread({}, c), {}, {\n            role: userRole.role\n          })\n        });\n      })[\"catch\"](console.error);\n    }\n  }, {\n    key: \"getButtonToDisplay\",\n    value: function getButtonToDisplay() {\n      var _this3 = this;\n\n      return this.state.currentClass.role === 'Student' ? __jsx(CreateGroupModal, {\n        onCreate: this.handleCreateGroup\n      }) : this.state.clicked === 'none' ? __jsx(Button, {\n        color: \"teal\",\n        content: \"Modify Discussions\",\n        fluid: true,\n        style: {\n          fontSize: '1vw'\n        },\n        onClick: function onClick() {\n          _this3.setState({\n            clicked: 'inline'\n          });\n        }\n      }) : __jsx(React.Fragment, null, __jsx(CreateDiscussionModal, {\n        id: \"createDiscussionModal\",\n        onCreate: this.handleCreateGroup\n      }), __jsx(Button, {\n        color: \"red\",\n        content: \"Done\",\n        fluid: true,\n        style: {\n          fontSize: '1vw',\n          marginTop: '2%'\n        },\n        onClick: function onClick() {\n          _this3.setState({\n            clicked: 'none'\n          });\n        }\n      }));\n    }\n  }, {\n    key: \"getDeleteButton\",\n    value: function getDeleteButton(group) {\n      var _this4 = this;\n\n      return __jsx(Button, {\n        id: \"deletebutton\".concat(group.id),\n        compact: true,\n        icon: true,\n        size: \"mini\",\n        floated: \"right\",\n        style: {\n          display: \"\".concat(this.state.clicked),\n          fontSize: '.6vw',\n          textAlign: 'center',\n          width: '10%',\n          marginBottom: '2%',\n          minWidth: '10px',\n          backgroundColor: 'transparent'\n        },\n        onClick: function onClick() {\n          api.deleteGroup(_this4.classId, group.id);\n        }\n      }, __jsx(Icon, {\n        name: \"delete\",\n        color: \"red\"\n      }));\n    }\n  }, {\n    key: \"showInviteButton\",\n    value: function showInviteButton(group) {\n      var plusIcon = __jsx(List.Icon, {\n        name: \"user plus\",\n        size: \"med\"\n      });\n\n      var noPlusIcon = __jsx(\"div\", null);\n\n      return this.state.currentGroup.id == group.id && this.state.vonageCred !== null ? plusIcon : noPlusIcon;\n    }\n  }, {\n    key: \"showOffice\",\n    value: function showOffice() {\n      var _this5 = this;\n\n      console.log(this.state.currentClass.role !== 'Student');\n      console.log(this.state.currentClass);\n      return (this.state.currentClass.role !== 'Student' || this.state.currentGroup.type === 'office') && __jsx(\"div\", {\n        style: {\n          paddingLeft: 20\n        }\n      }, __jsx(List, {\n        relaxed: true,\n        selection: true,\n        verticalAlign: \"middle\"\n      }, this.state.currentClass.groups.filter(function (group) {\n        return group.type === 'office';\n      }).map(function (group) {\n        return __jsx(List.Item, {\n          key: \"office\",\n          onClick: function onClick() {\n            if (_this5.state.currentGroup.id !== group.id) {\n              _this5.handleSelectGroup(group);\n\n              _this5.setState({\n                currentGroup: group\n              });\n            } else {\n              _this5.setState({\n                openInviteModal: true\n              });\n            }\n          },\n          style: _this5.state.currentGroup.id == group.id && _this5.state.vonageCred !== null ? clickedGroupsStyle : unClickedGroupsStyle\n        }, __jsx(List.Icon, {\n          name: \"graduation cap\"\n        }), __jsx(List.Content, null, __jsx(List.Header, {\n          as: \"a\"\n        }, \"TA Office\")), _this5.showInviteButton(group));\n      })));\n    }\n  }, {\n    key: \"leftDisplay\",\n    value: function leftDisplay() {\n      var _this6 = this;\n\n      return __jsx(\"div\", {\n        style: {\n          height: '100%',\n          marginLeft: '2.5%'\n        }\n      }, __jsx(Button.Group, {\n        size: \"huge\",\n        style: {\n          marginBottom: 12,\n          width: '100%'\n        },\n        fluid: true\n      }, __jsx(Button, {\n        compact: true,\n        icon: \"angle left\",\n        content: this.state.currentClass.name,\n        style: {\n          fontSize: '1.5vw',\n          textAlign: 'left',\n          width: '75%',\n          marginBottom: '2%',\n          minWidth: '41px'\n        },\n        onClick: this.handleBack\n      }), __jsx(Button, {\n        compact: true,\n        icon: \"setting\",\n        style: {\n          fontSize: '1.5vw',\n          textAlign: 'center',\n          width: '15%',\n          marginBottom: '2%',\n          minWidth: '14px'\n        }\n      })), this.showOffice(), __jsx(Accordion, {\n        fluid: true,\n        exclusive: false,\n        defaultActiveIndex: [0, 1],\n        style: {\n          fontSize: '1vw',\n          textAlign: 'left',\n          width: '100%',\n          marginBottom: '2%',\n          minWidth: '41px'\n        },\n        panels: [{\n          key: 'discussions',\n          title: 'Discussions',\n          content: {\n            content: __jsx(\"div\", {\n              style: {\n                paddingLeft: 20,\n                height: 200,\n                overflow: 'auto'\n              }\n            }, __jsx(List, {\n              relaxed: true,\n              selection: true\n            }, this.state.currentClass.groups.filter(function (group) {\n              return group.type === 'discussion';\n            }).map(function (group) {\n              return __jsx(React.Fragment, null, __jsx(List.Item, {\n                key: \"discussion_\".concat(group.id),\n                onClick: function onClick() {\n                  if (_this6.state.currentGroup.id !== group.id) {\n                    _this6.handleSelectGroup(group);\n\n                    _this6.setState({\n                      currentGroup: group\n                    });\n                  }\n                },\n                style: _this6.state.currentGroup.id == group.id && _this6.state.vonageCred !== null ? clickedGroupsStyle : unClickedGroupsStyle\n              }, __jsx(List.Icon, {\n                name: \"sound\"\n              }), __jsx(List.Content, null, __jsx(List.Header, {\n                as: \"a\"\n              }, group.name)), _this6.showInviteButton(group)), _this6.getDeleteButton(group));\n            })))\n          }\n        }, {\n          key: 'private-groups',\n          title: 'Private Groups',\n          content: {\n            content: __jsx(\"div\", {\n              style: {\n                paddingLeft: 20,\n                height: 200,\n                overflow: 'auto'\n              }\n            }, __jsx(List, {\n              relaxed: true,\n              selection: true\n            }, this.state.currentClass.groups.filter(function (group) {\n              return group.type === 'group';\n            }).map(function (group) {\n              return __jsx(List.Item, {\n                key: \"private_group_\".concat(group.id),\n                onClick: function onClick() {\n                  if (_this6.state.currentGroup.id !== group.id) {\n                    _this6.handleSelectGroup(group);\n\n                    _this6.setState({\n                      currentGroup: group\n                    });\n                  }\n                },\n                style: _this6.state.currentGroup.id == group.id && _this6.state.vonageCred !== null ? clickedGroupsStyle : unClickedGroupsStyle\n              }, __jsx(List.Icon, {\n                name: \"lock\"\n              }), __jsx(List.Content, null, __jsx(List.Header, {\n                as: \"a\"\n              }, group.name)), _this6.showInviteButton(group));\n            })))\n          }\n        }]\n      }), __jsx(\"div\", {\n        style: {\n          position: 'absolute',\n          width: 'calc(100% - 38px)',\n          bottom: 14\n        }\n      }, this.getButtonToDisplay()));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this7 = this;\n\n      return __jsx(Layout, {\n        left: this.leftDisplay(),\n        right: __jsx(Queue, {\n          onJoin: this.handleJoinTA\n        })\n      }, this.state.vonageCred && __jsx(Vonage, {\n        sessionId: this.state.vonageCred.sessionId,\n        token: this.state.vonageCred.token,\n        onLeave: function onLeave() {\n          _this7.setState({\n            vonageCred: null\n          });\n\n          _this7.setState({\n            currentGroup: {\n              id: '',\n              name: ''\n            }\n          });\n\n          EventEmitter.publish('callOver');\n        }\n      }), __jsx(StudentInviteModal, {\n        isOpen: this.openInviteModal,\n        onInvite: this.handleInvite\n      }));\n    }\n  }]);\n\n  return ClassPage;\n}(Component);\n\nexport default _c6 = AuthRequired(_c5 = withRouter(ClassPage));\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"CreateDiscussionModal$dynamic\");\n$RefreshReg$(_c2, \"CreateDiscussionModal\");\n$RefreshReg$(_c3, \"Vonage$dynamic\");\n$RefreshReg$(_c4, \"Vonage\");\n$RefreshReg$(_c5, \"%default%$AuthRequired\");\n$RefreshReg$(_c6, \"%default%\");","map":{"version":3,"sources":["C:/Users/ryanj/Documents/mercury/pages/classes/[classId].js"],"names":["React","Component","withRouter","dynamic","Layout","Button","Accordion","List","Icon","AuthRequired","useAuth","Queue","api","CreateGroupModal","StudentInviteModal","EventEmitter","CreateDiscussionModal","ssr","Vonage","unClickedGroupsStyle","fontSize","textAlign","width","marginBottom","minWidth","display","clickedGroupsStyle","background","borderRadius","borderWidth","borderColor","ClassPage","props","getClass","classId","then","c","userRole","users","find","u","id","user","router","push","setState","currentClass","role","console","error","group","postGroupToken","token","vonageCred","sessionId","handleSelectGroup","currentGroup","postGroup","name","type","fetchCurrentClass","openInviteModal","state","clicked","groups","query","getMe","meData","handleCreateGroup","marginTop","backgroundColor","deleteGroup","plusIcon","noPlusIcon","log","paddingLeft","filter","map","showInviteButton","height","marginLeft","handleBack","showOffice","key","title","content","overflow","getDeleteButton","position","bottom","getButtonToDisplay","leftDisplay","handleJoinTA","publish","handleInvite"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { withRouter } from 'next/router'\r\nimport dynamic from 'next/dynamic'\r\nimport Layout from '../../components/layout'\r\nimport { Button, Accordion, List, Icon } from 'semantic-ui-react'\r\nimport { AuthRequired, useAuth } from '../../components/authProvider'\r\nimport Queue from '../../components/queue/queue'\r\nimport * as api from '../../util/mercuryService'\r\nimport CreateGroupModal from '../../components/createGroupModal'\r\nimport StudentInviteModal from '../../components/studentInviteModal'\r\nimport { EventEmitter } from '../../components/util/EventEmitter'\r\n// import { render } from 'nprogress'\r\n\r\nconst CreateDiscussionModal = dynamic(\r\n  () => import('../../components/createDiscussionModal'),\r\n  {\r\n    ssr: false,\r\n  }\r\n)\r\nconst Vonage = dynamic(() => import('../../components/vonage'), {\r\n  ssr: false,\r\n})\r\n\r\nconst unClickedGroupsStyle = {\r\n  fontSize: '.8vw',\r\n  textAlign: 'left',\r\n  width: '80%',\r\n  marginBottom: '2%',\r\n  minWidth: '41px',\r\n  display: 'inline-block',\r\n}\r\n\r\nconst clickedGroupsStyle = {\r\n  fontSize: '.8vw',\r\n  textAlign: 'left',\r\n  width: '80%',\r\n  marginBottom: '2%',\r\n  minWidth: '41px',\r\n  background: '#e0e1e2',\r\n  borderRadius: 10,\r\n  borderWidth: 1,\r\n  borderColor: '#fff',\r\n  display: 'inline-block',\r\n}\r\n\r\nclass ClassPage extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      clicked: 'none',\r\n      currentGroup: { id: '', name: '' },\r\n      currentClass: {\r\n        id: '',\r\n        name: '',\r\n        groups: [],\r\n        users: [],\r\n        role: 'Student',\r\n      },\r\n      vonageCred: null,\r\n      openInviteModal: false,\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { classId } = this.props.router.query\r\n    this.classId = classId\r\n    if (!this.classId) return\r\n\r\n    api\r\n      .getMe()\r\n      .then((meData) => {\r\n        this.user = meData\r\n      })\r\n      .then(() => api.getClass(this.classId))\r\n      .then((c) => {\r\n        const userRole = c.users.find((u) => u.id === this.user.id)\r\n        if (!userRole) this.props.router.push('/calendar')\r\n        this.setState({\r\n          currentClass: {\r\n            ...c,\r\n            role: userRole.role,\r\n          },\r\n        })\r\n      })\r\n      .catch(console.error)\r\n  }\r\n\r\n  fetchCurrentClass = () => {\r\n    api\r\n      .getClass(this.classId)\r\n      .then((c) => {\r\n        const userRole = c.users.find((u) => u.id === this.user.id)\r\n        if (!userRole) this.props.router.push('/calendar')\r\n        this.setState({\r\n          currentClass: {\r\n            ...c,\r\n            role: userRole.role,\r\n          },\r\n        })\r\n      })\r\n      .catch(console.error)\r\n  }\r\n\r\n  handleBack = async () => {\r\n    await this.props.router.push('/calendar')\r\n  }\r\n\r\n  handleSelectGroup = (group) => {\r\n    api\r\n      .postGroupToken(this.classId, group.id)\r\n      .then(({ token }) => {\r\n        this.setState({ vonageCred: null })\r\n        this.setState({ vonageCred: { sessionId: group.sessionId, token } })\r\n      })\r\n      .catch(console.error)\r\n  }\r\n\r\n  handleJoinTA = (group) => {\r\n    this.handleSelectGroup(group)\r\n    this.setState({ currentGroup: group })\r\n  }\r\n\r\n  getButtonToDisplay() {\r\n    return this.state.currentClass.role === 'Student' ? (\r\n      <CreateGroupModal onCreate={this.handleCreateGroup} />\r\n    ) : this.state.clicked === 'none' ? (\r\n      <Button\r\n        color=\"teal\"\r\n        content=\"Modify Discussions\"\r\n        fluid\r\n        style={{ fontSize: '1vw' }}\r\n        onClick={() => {\r\n          this.setState({ clicked: 'inline' })\r\n        }}\r\n      />\r\n    ) : (\r\n      <>\r\n        <CreateDiscussionModal\r\n          id=\"createDiscussionModal\"\r\n          onCreate={this.handleCreateGroup}\r\n        />\r\n        <Button\r\n          color=\"red\"\r\n          content=\"Done\"\r\n          fluid\r\n          style={{ fontSize: '1vw', marginTop: '2%' }}\r\n          onClick={() => {\r\n            this.setState({ clicked: 'none' })\r\n          }}\r\n        />\r\n      </>\r\n    )\r\n  }\r\n\r\n  getDeleteButton(group) {\r\n    return (\r\n      <Button\r\n        id={`deletebutton${group.id}`}\r\n        compact\r\n        icon\r\n        size=\"mini\"\r\n        floated=\"right\"\r\n        style={{\r\n          display: `${this.state.clicked}`,\r\n          fontSize: '.6vw',\r\n          textAlign: 'center',\r\n          width: '10%',\r\n          marginBottom: '2%',\r\n          minWidth: '10px',\r\n          backgroundColor: 'transparent',\r\n        }}\r\n        onClick={() => {\r\n          api.deleteGroup(this.classId, group.id)\r\n        }}\r\n      >\r\n        <Icon name=\"delete\" color=\"red\" />\r\n      </Button>\r\n    )\r\n  }\r\n\r\n  handleCreateGroup = async (group) => {\r\n    await api.postGroup(this.classId, group.name, group.type).then((group) => {\r\n      this.fetchCurrentClass()\r\n      this.handleSelectGroup(group)\r\n      this.setState({ currentGroup: group })\r\n    })\r\n  }\r\n\r\n  showInviteButton(group) {\r\n    const plusIcon = <List.Icon name=\"user plus\" size=\"med\" />\r\n    const noPlusIcon = <div></div>\r\n\r\n    return this.state.currentGroup.id == group.id &&\r\n      this.state.vonageCred !== null\r\n      ? plusIcon\r\n      : noPlusIcon\r\n  }\r\n\r\n  handleInvite = () => {\r\n    this.setState({ openInviteModal: false })\r\n  }\r\n\r\n  showOffice() {\r\n    console.log(this.state.currentClass.role !== 'Student')\r\n    console.log(this.state.currentClass)\r\n    return (\r\n      (this.state.currentClass.role !== 'Student' ||\r\n        this.state.currentGroup.type === 'office') && (\r\n        <div style={{ paddingLeft: 20 }}>\r\n          <List relaxed selection verticalAlign=\"middle\">\r\n            {this.state.currentClass.groups\r\n              .filter((group) => group.type === 'office')\r\n              .map((group) => (\r\n                <List.Item\r\n                  key={`office`}\r\n                  onClick={() => {\r\n                    if (this.state.currentGroup.id !== group.id) {\r\n                      this.handleSelectGroup(group)\r\n                      this.setState({ currentGroup: group })\r\n                    } else {\r\n                      this.setState({ openInviteModal: true })\r\n                    }\r\n                  }}\r\n                  style={\r\n                    this.state.currentGroup.id == group.id &&\r\n                    this.state.vonageCred !== null\r\n                      ? clickedGroupsStyle\r\n                      : unClickedGroupsStyle\r\n                  }\r\n                >\r\n                  <List.Icon name=\"graduation cap\" />\r\n                  <List.Content>\r\n                    <List.Header as=\"a\">TA Office</List.Header>\r\n                  </List.Content>\r\n                  {this.showInviteButton(group)}\r\n                </List.Item>\r\n              ))}\r\n          </List>\r\n        </div>\r\n      )\r\n    )\r\n  }\r\n\r\n  leftDisplay() {\r\n    return (\r\n      <div style={{ height: '100%', marginLeft: '2.5%' }}>\r\n        <Button.Group\r\n          size=\"huge\"\r\n          style={{ marginBottom: 12, width: '100%' }}\r\n          fluid\r\n        >\r\n          <Button\r\n            compact\r\n            icon=\"angle left\"\r\n            content={this.state.currentClass.name}\r\n            style={{\r\n              fontSize: '1.5vw',\r\n              textAlign: 'left',\r\n              width: '75%',\r\n              marginBottom: '2%',\r\n              minWidth: '41px',\r\n            }}\r\n            onClick={this.handleBack}\r\n          />\r\n          <Button\r\n            compact\r\n            icon=\"setting\"\r\n            style={{\r\n              fontSize: '1.5vw',\r\n              textAlign: 'center',\r\n              width: '15%',\r\n              marginBottom: '2%',\r\n              minWidth: '14px',\r\n            }}\r\n          />\r\n        </Button.Group>\r\n        {this.showOffice()}\r\n        <Accordion\r\n          fluid\r\n          exclusive={false}\r\n          defaultActiveIndex={[0, 1]}\r\n          style={{\r\n            fontSize: '1vw',\r\n            textAlign: 'left',\r\n            width: '100%',\r\n            marginBottom: '2%',\r\n            minWidth: '41px',\r\n          }}\r\n          panels={[\r\n            {\r\n              key: 'discussions',\r\n              title: 'Discussions',\r\n              content: {\r\n                content: (\r\n                  <div\r\n                    style={{ paddingLeft: 20, height: 200, overflow: 'auto' }}\r\n                  >\r\n                    <List relaxed selection>\r\n                      {this.state.currentClass.groups\r\n                        .filter((group) => group.type === 'discussion')\r\n                        .map((group) => (\r\n                          <>\r\n                            <List.Item\r\n                              key={`discussion_${group.id}`}\r\n                              onClick={() => {\r\n                                if (this.state.currentGroup.id !== group.id) {\r\n                                  this.handleSelectGroup(group)\r\n                                  this.setState({ currentGroup: group })\r\n                                }\r\n                              }}\r\n                              style={\r\n                                this.state.currentGroup.id == group.id &&\r\n                                this.state.vonageCred !== null\r\n                                  ? clickedGroupsStyle\r\n                                  : unClickedGroupsStyle\r\n                              }\r\n                            >\r\n                              <List.Icon name=\"sound\" />\r\n                              <List.Content>\r\n                                <List.Header as=\"a\">{group.name}</List.Header>\r\n                              </List.Content>\r\n                              {this.showInviteButton(group)}\r\n                            </List.Item>\r\n                            {this.getDeleteButton(group)}\r\n                          </>\r\n                        ))}\r\n                    </List>\r\n                  </div>\r\n                ),\r\n              },\r\n            },\r\n            {\r\n              key: 'private-groups',\r\n              title: 'Private Groups',\r\n              content: {\r\n                content: (\r\n                  <div\r\n                    style={{ paddingLeft: 20, height: 200, overflow: 'auto' }}\r\n                  >\r\n                    <List relaxed selection>\r\n                      {this.state.currentClass.groups\r\n                        .filter((group) => group.type === 'group')\r\n                        .map((group) => (\r\n                          <List.Item\r\n                            key={`private_group_${group.id}`}\r\n                            onClick={() => {\r\n                              if (this.state.currentGroup.id !== group.id) {\r\n                                this.handleSelectGroup(group)\r\n                                this.setState({ currentGroup: group })\r\n                              }\r\n                            }}\r\n                            style={\r\n                              this.state.currentGroup.id == group.id &&\r\n                              this.state.vonageCred !== null\r\n                                ? clickedGroupsStyle\r\n                                : unClickedGroupsStyle\r\n                            }\r\n                          >\r\n                            <List.Icon name=\"lock\" />\r\n                            <List.Content>\r\n                              <List.Header as=\"a\">{group.name}</List.Header>\r\n                            </List.Content>\r\n                            {this.showInviteButton(group)}\r\n                          </List.Item>\r\n                        ))}\r\n                    </List>\r\n                  </div>\r\n                ),\r\n              },\r\n            },\r\n          ]}\r\n        />\r\n        <div\r\n          style={{\r\n            position: 'absolute',\r\n            width: 'calc(100% - 38px)',\r\n            bottom: 14,\r\n          }}\r\n        >\r\n          {this.getButtonToDisplay()}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Layout\r\n        left={this.leftDisplay()}\r\n        right={<Queue onJoin={this.handleJoinTA} />}\r\n      >\r\n        {this.state.vonageCred && (\r\n          <Vonage\r\n            sessionId={this.state.vonageCred.sessionId}\r\n            token={this.state.vonageCred.token}\r\n            onLeave={() => {\r\n              this.setState({ vonageCred: null })\r\n              this.setState({ currentGroup: { id: '', name: '' } })\r\n              EventEmitter.publish('callOver')\r\n            }}\r\n          />\r\n        )}\r\n        <StudentInviteModal\r\n          isOpen={this.openInviteModal}\r\n          onInvite={this.handleInvite}\r\n        />\r\n      </Layout>\r\n    )\r\n  }\r\n}\r\nexport default AuthRequired(withRouter(ClassPage))\r\n"]},"metadata":{},"sourceType":"module"}