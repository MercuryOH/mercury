{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { Modal, Button, Header, Icon } from 'semantic-ui-react';\nimport FormHTMLEditor from './FormHTMLEditor';\nimport StarRatings from 'react-star-ratings';\nimport stripHtml from 'string-strip-html';\nimport * as api from '../util/mercuryService';\nimport { EventEmitter } from './util/EventEmitter';\n\nvar FeedbackModal = /*#__PURE__*/function (_Component) {\n  _inherits(FeedbackModal, _Component);\n\n  var _super = _createSuper(FeedbackModal);\n\n  function FeedbackModal(props) {\n    var _this;\n\n    _classCallCheck(this, FeedbackModal);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      modalState: false,\n      rating: 0,\n      comment: '',\n      classId: -1\n    };\n    EventEmitter.subscribe('activateFeedbackModal', function (classId) {\n      _this.setState({\n        classId: classId,\n        modalState: true\n      });\n    });\n    return _this;\n  }\n\n  _createClass(FeedbackModal, [{\n    key: \"changeRating\",\n    value: function changeRating(newRating, _name) {\n      this.setState({\n        rating: newRating\n      });\n    }\n  }, {\n    key: \"changeComment\",\n    value: function changeComment(comment) {\n      var newComment = stripHtml(comment);\n      this.setState({\n        comment: newComment\n      });\n    }\n  }, {\n    key: \"submit\",\n    value: function () {\n      var _submit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _this$state, classId, rating, comment;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$state = this.state, classId = _this$state.classId, rating = _this$state.rating, comment = _this$state.comment;\n                _context.next = 3;\n                return api.submitFeedback(classId, rating, comment);\n\n              case 3:\n                this.setState({\n                  modalState: false\n                });\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function submit() {\n        return _submit.apply(this, arguments);\n      }\n\n      return submit;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          rating = _this$state2.rating,\n          modalState = _this$state2.modalState,\n          comment = _this$state2.comment;\n      return __jsx(\"div\", null, __jsx(Modal, {\n        style: {\n          borderless: 'true',\n          width: '40%',\n          height: '80%'\n        },\n        open: modalState,\n        onClose: function onClose() {\n          return _this2.setState({\n            modalState: false\n          });\n        },\n        closeOnDimmerClick: false,\n        closeOnEscape: false\n      }, __jsx(Modal.Content, {\n        style: {\n          borderless: 'true'\n        }\n      }, __jsx(Modal.Header, null, __jsx(Icon, {\n        onClick: function onClick() {\n          return _this2.setState({\n            modalState: false\n          });\n        },\n        style: {\n          \"float\": 'right',\n          cursor: 'pointer'\n        },\n        name: \"times\"\n      })), __jsx(Header, null, \"Rate Your Call\"), __jsx(StarRatings, {\n        rating: rating,\n        starRatedColor: \"blue\",\n        changeRating: this.changeRating.bind(this),\n        numberOfStars: 5,\n        name: \"rating\"\n      }), __jsx(\"br\", null), __jsx(Header, null, \"Provide Your Comments\"), __jsx(FormHTMLEditor, {\n        onChange: this.changeComment.bind(this),\n        defaultValue: comment\n      }), __jsx(\"br\", null), __jsx(Button, {\n        onClick: this.submit.bind(this)\n      }, \"Submit\"))));\n    }\n  }]);\n\n  return FeedbackModal;\n}(Component);\n\nexport { FeedbackModal as default };","map":{"version":3,"sources":["C:/Users/ryanj/Documents/mercury/components/feedbackModal.js"],"names":["React","Component","Modal","Button","Header","Icon","FormHTMLEditor","StarRatings","stripHtml","api","EventEmitter","FeedbackModal","props","state","modalState","rating","comment","classId","subscribe","setState","newRating","_name","newComment","submitFeedback","borderless","width","height","cursor","changeRating","bind","changeComment","submit"],"mappings":";;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,KAAT,EAAgBC,MAAhB,EAAwBC,MAAxB,EAAgCC,IAAhC,QAA4C,mBAA5C;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,OAAOC,WAAP,MAAwB,oBAAxB;AACA,OAAOC,SAAP,MAAsB,mBAAtB;AACA,OAAO,KAAKC,GAAZ,MAAqB,wBAArB;AACA,SAASC,YAAT,QAA6B,qBAA7B;;IAEqBC,a;;;;;AACnB,yBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACXC,MAAAA,UAAU,EAAE,KADD;AAEXC,MAAAA,MAAM,EAAE,CAFG;AAGXC,MAAAA,OAAO,EAAE,EAHE;AAIXC,MAAAA,OAAO,EAAE,CAAC;AAJC,KAAb;AAOAP,IAAAA,YAAY,CAACQ,SAAb,CAAuB,uBAAvB,EAAgD,UAACD,OAAD,EAAa;AAC3D,YAAKE,QAAL,CAAc;AAAEF,QAAAA,OAAO,EAAPA,OAAF;AAAWH,QAAAA,UAAU,EAAE;AAAvB,OAAd;AACD,KAFD;AATiB;AAYlB;;;;iCAEYM,S,EAAWC,K,EAAO;AAC7B,WAAKF,QAAL,CAAc;AACZJ,QAAAA,MAAM,EAAEK;AADI,OAAd;AAGD;;;kCAEaJ,O,EAAS;AACrB,UAAMM,UAAU,GAAGd,SAAS,CAACQ,OAAD,CAA5B;AACA,WAAKG,QAAL,CAAc;AAAEH,QAAAA,OAAO,EAAEM;AAAX,OAAd;AACD;;;;;;;;;;;8BAGsC,KAAKT,K,EAAlCI,O,eAAAA,O,EAASF,M,eAAAA,M,EAAQC,O,eAAAA,O;;uBACnBP,GAAG,CAACc,cAAJ,CAAmBN,OAAnB,EAA4BF,MAA5B,EAAoCC,OAApC,C;;;AACN,qBAAKG,QAAL,CAAc;AAAEL,kBAAAA,UAAU,EAAE;AAAd,iBAAd;;;;;;;;;;;;;;;;;;6BAGO;AAAA;;AAAA,yBACiC,KAAKD,KADtC;AAAA,UACCE,MADD,gBACCA,MADD;AAAA,UACSD,UADT,gBACSA,UADT;AAAA,UACqBE,OADrB,gBACqBA,OADrB;AAGP,aACE,mBACE,MAAC,KAAD;AACE,QAAA,KAAK,EAAE;AAAEQ,UAAAA,UAAU,EAAE,MAAd;AAAsBC,UAAAA,KAAK,EAAE,KAA7B;AAAoCC,UAAAA,MAAM,EAAE;AAA5C,SADT;AAEE,QAAA,IAAI,EAAEZ,UAFR;AAGE,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAI,CAACK,QAAL,CAAc;AAAEL,YAAAA,UAAU,EAAE;AAAd,WAAd,CAAN;AAAA,SAHX;AAIE,QAAA,kBAAkB,EAAE,KAJtB;AAKE,QAAA,aAAa,EAAE;AALjB,SAOE,MAAC,KAAD,CAAO,OAAP;AAAe,QAAA,KAAK,EAAE;AAAEU,UAAAA,UAAU,EAAE;AAAd;AAAtB,SACE,MAAC,KAAD,CAAO,MAAP,QACE,MAAC,IAAD;AACE,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAI,CAACL,QAAL,CAAc;AAAEL,YAAAA,UAAU,EAAE;AAAd,WAAd,CAAN;AAAA,SADX;AAEE,QAAA,KAAK,EAAE;AAAE,mBAAO,OAAT;AAAkBa,UAAAA,MAAM,EAAE;AAA1B,SAFT;AAGE,QAAA,IAAI,EAAC;AAHP,QADF,CADF,EASE,MAAC,MAAD,yBATF,EAUE,MAAC,WAAD;AACE,QAAA,MAAM,EAAEZ,MADV;AAEE,QAAA,cAAc,EAAC,MAFjB;AAGE,QAAA,YAAY,EAAE,KAAKa,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAHhB;AAIE,QAAA,aAAa,EAAE,CAJjB;AAKE,QAAA,IAAI,EAAC;AALP,QAVF,EAkBE,iBAlBF,EAoBE,MAAC,MAAD,gCApBF,EAsBE,MAAC,cAAD;AACE,QAAA,QAAQ,EAAE,KAAKC,aAAL,CAAmBD,IAAnB,CAAwB,IAAxB,CADZ;AAEE,QAAA,YAAY,EAAEb;AAFhB,QAtBF,EA0BE,iBA1BF,EA4BE,MAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,KAAKe,MAAL,CAAYF,IAAZ,CAAiB,IAAjB;AAAjB,kBA5BF,CAPF,CADF,CADF;AA0CD;;;;EA7EwC5B,S;;SAAtBU,a","sourcesContent":["import React, { Component } from 'react'\r\nimport { Modal, Button, Header, Icon } from 'semantic-ui-react'\r\nimport FormHTMLEditor from './FormHTMLEditor'\r\nimport StarRatings from 'react-star-ratings'\r\nimport stripHtml from 'string-strip-html'\r\nimport * as api from '../util/mercuryService'\r\nimport { EventEmitter } from './util/EventEmitter'\r\n\r\nexport default class FeedbackModal extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      modalState: false,\r\n      rating: 0,\r\n      comment: '',\r\n      classId: -1,\r\n    }\r\n\r\n    EventEmitter.subscribe('activateFeedbackModal', (classId) => {\r\n      this.setState({ classId, modalState: true })\r\n    })\r\n  }\r\n\r\n  changeRating(newRating, _name) {\r\n    this.setState({\r\n      rating: newRating,\r\n    })\r\n  }\r\n\r\n  changeComment(comment) {\r\n    const newComment = stripHtml(comment)\r\n    this.setState({ comment: newComment })\r\n  }\r\n\r\n  async submit() {\r\n    const { classId, rating, comment } = this.state\r\n    await api.submitFeedback(classId, rating, comment)\r\n    this.setState({ modalState: false })\r\n  }\r\n\r\n  render() {\r\n    const { rating, modalState, comment } = this.state\r\n\r\n    return (\r\n      <div>\r\n        <Modal\r\n          style={{ borderless: 'true', width: '40%', height: '80%' }}\r\n          open={modalState}\r\n          onClose={() => this.setState({ modalState: false })}\r\n          closeOnDimmerClick={false}\r\n          closeOnEscape={false}\r\n        >\r\n          <Modal.Content style={{ borderless: 'true' }}>\r\n            <Modal.Header>\r\n              <Icon\r\n                onClick={() => this.setState({ modalState: false })}\r\n                style={{ float: 'right', cursor: 'pointer' }}\r\n                name=\"times\"\r\n              ></Icon>\r\n            </Modal.Header>\r\n\r\n            <Header>Rate Your Call</Header>\r\n            <StarRatings\r\n              rating={rating}\r\n              starRatedColor=\"blue\"\r\n              changeRating={this.changeRating.bind(this)}\r\n              numberOfStars={5}\r\n              name=\"rating\"\r\n            />\r\n\r\n            <br />\r\n\r\n            <Header>Provide Your Comments</Header>\r\n\r\n            <FormHTMLEditor\r\n              onChange={this.changeComment.bind(this)}\r\n              defaultValue={comment}\r\n            />\r\n            <br />\r\n\r\n            <Button onClick={this.submit.bind(this)}>Submit</Button>\r\n          </Modal.Content>\r\n        </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}