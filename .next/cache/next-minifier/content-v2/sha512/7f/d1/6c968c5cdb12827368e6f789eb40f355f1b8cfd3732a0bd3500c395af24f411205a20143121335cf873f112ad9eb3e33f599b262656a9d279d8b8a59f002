{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{Lfp7:function(e,t,n){\"use strict\";n.r(t);var i=n(\"1OyB\"),o=n(\"vuIU\"),s=n(\"JX7q\"),r=n(\"Ji7U\"),a=n(\"md7G\"),c=n(\"foSv\"),u=n(\"rePB\"),l=n(\"q1tI\"),h=n.n(l),d=n(\"dta6\"),f=n(\"5HNm\"),v=h.a.createElement;function p(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Object(a.a)(this,n)}}var b=function(e){Object(r.a)(n,e);var t=p(n);function n(e){var o;return Object(i.a)(this,n),o=t.call(this,e),Object(u.a)(Object(s.a)(o),\"onError\",(function(e){o.setState({error:\"Failed to publish: \".concat(e.message)})})),o.state={error:null,audio:!0,video:!0,videoSource:\"screen\",appear:!1},o.defineEventEmitterCallbacks(),o}return Object(o.a)(n,[{key:\"defineEventEmitterCallbacks\",value:function(){var e=this;f.a.subscribe(\"startScreenShare\",(function(){e.setState({appear:!0})})),f.a.subscribe(\"stopScreenShare\",(function(){e.setState({appear:!1})}))}},{key:\"render\",value:function(){return!1===this.state.appear?null:v(h.a.Fragment,null,this.state.error?v(\"div\",null,this.state.error):null,v(d.OTPublisher,{properties:{width:\"13.62vw\",maxWidth:\"13.62vw\",height:\"20vh\",publishAudio:this.state.audio,publishVideo:this.state.video,videoSource:\"screen\"},session:this.props.session,onError:this.onError}))}}]),n}(l.Component),m=h.a.createElement;function S(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Object(a.a)(this,n)}}var y=function(e){Object(r.a)(n,e);var t=S(n);function n(e){var o;return Object(i.a)(this,n),o=t.call(this,e),Object(u.a)(Object(s.a)(o),\"onError\",(function(e){o.setState({error:\"Failed to publish: \".concat(e.message)})})),o.state={error:null,audio:!0,video:!0},o.defineEventEmitterCallbacks(),o}return Object(o.a)(n,[{key:\"defineEventEmitterCallbacks\",value:function(){var e=this;f.a.subscribe(\"disableVideo\",(function(){e.setState({video:!1}),f.a.publish(\"disableVideoButton\")})),f.a.subscribe(\"enableVideo\",(function(){e.setState({video:!0}),f.a.publish(\"enableVideoButton\")}))}},{key:\"render\",value:function(){return m(\"div\",null,this.state.error?m(\"div\",null,this.state.error):null,m(d.OTPublisher,{properties:{width:\"13.57vw\",maxWidth:\"13.57vw\",maxHeight:\"8vh\",publishVideo:this.state.video,marginBottom:\"5px\"},session:this.props.session,onError:this.onError}),m(b,{style:{width:\"13.62vw\",maxWidth:\"13.62vw\",height:\"500px\",maxHeight:\"16vh\",marginBottom:\"5px\"},session:this.props.session}))}}]),n}(l.Component),x=n(\"a6RD\"),O=n.n(x),k=n(\"QetY\"),w=h.a.createElement;function g(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Object(a.a)(this,n)}}var j=O()((function(){return Promise.resolve().then(n.t.bind(null,\"dta6\",7))}),{ssr:!1,loadableGenerated:{webpack:function(){return[\"dta6\"]},modules:[\"opentok-react\"]}}),E=function(e){Object(r.a)(n,e);var t=g(n);function n(e){var o;Object(i.a)(this,n),o=t.call(this,e),Object(u.a)(Object(s.a)(o),\"handlePublish\",(function(){console.log(\"Successfully published!\")})),Object(u.a)(Object(s.a)(o),\"handleSubscribe\",(function(){console.log(\"Subscribed!\")})),Object(u.a)(Object(s.a)(o),\"handleSessionError\",(function(e){console.error(e)})),Object(u.a)(Object(s.a)(o),\"handlePublishError\",(function(e){console.error(e)})),Object(u.a)(Object(s.a)(o),\"handleSubscribeError\",(function(e){console.error(e)})),o.state={ssButton:!0,streams:[],focusStream:{},videoButton:!0,expand:!1},o.defineEventEmitterCallbacks(),o.sessionEventHandlers={sessionConnected:function(){},sessionDisconnected:function(){},sessionReconnected:function(){},sessionReconnecting:function(){}},o.publishEventHandlers={accessDenied:function(){},streamCreated:function(){},streamDestroyed:function(){}},o.subscribeEventHandlers={videoEnabled:function(){},videoDisabled:function(){}};var r=o.props;r.sessionId,r.token,r.onLeave;return o}return Object(o.a)(n,[{key:\"defineEventEmitterCallbacks\",value:function(){var e=this;f.a.subscribe(\"disableVideoButton\",(function(){e.setState({videoButton:!1})})),f.a.subscribe(\"enableVideoButton\",(function(){e.setState({videoButton:!0})}))}},{key:\"getStreamToDisplay\",value:function(){return!0===this.state.expand?w(j,{key:this.state.focusStream.id,session:this.sessionHelper.session,stream:this.state.focusStream,properties:{maxWidth:\"75vw\",maxHeight:\"75vh\",height:\"85vh\",width:\"48vw\"},onSubscribe:this.handleSubscribe,onError:this.handleSubscribeError}):null}},{key:\"screenShareButton\",value:function(){var e=this;return!0===this.state.ssButton?w(k.a,{onClick:function(){f.a.publish(\"startScreenShare\"),e.setState({ssButton:!1})},style:{fontSize:\".8vw\",display:\"inline-flex\"},icon:\"tv\",content:\"Share Screen\"}):w(k.a,{onClick:function(){f.a.publish(\"stopScreenShare\"),e.setState({ssButton:!0})},icon:\"tv\",style:{fontSize:\".8vw\",display:\"inline-flex\"},content:\"Stop Screen Share\"})}},{key:\"videoStateButton\",value:function(){return!0===this.state.videoButton?w(k.a,{onClick:function(){f.a.publish(\"disableVideo\")},icon:\"hide\",style:{fontSize:\".8vw\",display:\"inline-flex\"},content:\"Disable video\"}):w(k.a,{onClick:function(){f.a.publish(\"enableVideo\")},icon:\"eye\",style:{fontSize:\".8vw\",display:\"inline-flex\"},content:\"Enable video\"})}},{key:\"unexpandButton\",value:function(){var e=this;return!0===this.state.expand?w(k.a,{onClick:function(){e.setState({expand:!1}),console.log(\"ore\")},style:{fontSize:\".8vw\",display:\"inline-flex\"},content:\"Unexpand video\"}):null}},{key:\"componentWillMount\",value:function(){var e=this,t=this.props,n=t.sessionId,i=t.token;t.onLeave;this.sessionHelper=Object(d.createSession)({apiKey:\"\".concat(\"46858704\"),sessionId:\"\".concat(n),token:\"\".concat(i),onStreamsUpdated:function(t){e.setState({streams:t})}})}},{key:\"componentWillUnmount\",value:function(){this.sessionHelper.disconnect()}},{key:\"render\",value:function(){var e=this,t=this.props,n=(t.sessionId,t.token,t.onLeave);return w(h.a.Fragment,null,w(\"div\",{style:{display:\"inline-flex\",width:\"100%\",maxHeight:\"86vh\"}},w(\"div\",{style:{width:\"78%\",maxHeight:\"85vh\",overflow:\"auto\"}},this.getStreamToDisplay()),w(\"div\",{style:{width:\"22%\",maxHeight:\"85vh\",overflow:\"auto\",height:\"1000px\"}},w(y,{style:{width:\"13.57vw\",maxWidth:\"13.57vw\",marginBottom:\"5px\"},session:this.sessionHelper.session}),this.state.streams.map((function(t){return w(h.a.Fragment,null,w(k.a,{onClick:function(){e.setState({focusStream:t}),e.setState({expand:!0})},style:{padding:\"0px\",width:\"100%\",maxHeight:\"18vh\",margin:\"0px\"}},w(j,{key:t.id,session:e.sessionHelper.session,stream:t,properties:{width:\"100%\",height:\"18vh\",maxHeight:\"18vh\",margin:\"0px\"},onSubscribe:e.handleSubscribe,onError:e.handleSubscribeError})))})))),this.videoStateButton(),this.unexpandButton(),this.screenShareButton(),w(k.a,{onClick:n,color:\"red\",icon:\"close\",style:{fontSize:\".8vw\",display:\"inline-flex\"},content:\"Leave call\"}))}}]),n}(h.a.Component);t.default=E}}]);","extractedComments":[]}